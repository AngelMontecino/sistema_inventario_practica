{% extends 'base.html' %}

{% block title %}Nuevo Producto - Sistema Inventario{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <fluent-card class="p-4">
            <div class="border-bottom pb-3 mb-4">
                <h4 class="mb-0 fw-bold text-primary">Registrar Nuevo Producto</h4>
            </div>
            
            {% if error %}
            <div class="alert alert-danger mb-4">{{ error }}</div>
            {% endif %}

            <form method="POST">
                {% csrf_token %}

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="nombre" class="form-label small fw-bold text-secondary">Nombre del Producto</label>
                        <input type="text" class="form-control" id="nombre" name="nombre" required>
                    </div>
                    <div class="col-md-6">
                        <label for="codigo_barras" class="form-label small fw-bold text-secondary">Código de Barras</label>
                        <div class="input-group">
                            <span class="input-group-text bg-white border-end-0"><i class='bx bx-barcode'></i></span>
                            <input type="text" class="form-control border-start-0 ps-0" id="codigo_barras" name="codigo_barras">
                        </div>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="descripcion" class="form-label small fw-bold text-secondary">Descripción</label>
                    <textarea class="form-control" id="descripcion" name="descripcion" rows="2"></textarea>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="precio_venta" class="form-label small fw-bold text-secondary">Precio de Venta</label>
                        <div class="input-group">
                            <span class="input-group-text bg-white border-end-0">$</span>
                            <input type="number" step="0.01" class="form-control border-start-0 ps-0 fw-bold text-success" id="precio_venta"
                                name="precio_venta" required>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label for="costo_neto" class="form-label small fw-bold text-secondary">Costo Neto</label>
                        <div class="input-group">
                            <span class="input-group-text bg-white border-end-0">$</span>
                            <input type="number" step="0.01" class="form-control border-start-0 ps-0" id="costo_neto" name="costo_neto"
                                required>
                        </div>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-4">
                        <label for="unidad_medida" class="form-label small fw-bold text-secondary">Unidad de Medida</label>
                        <select class="form-select" id="unidad_medida" name="unidad_medida">
                            <option value="UNID">Unidad</option>
                            <option value="KG">Kilogramo</option>
                            <option value="LITRO">Litro</option>
                        </select>
                    </div>
                    <div class="col-md-8">
                        <label for="id_categoria" class="form-label small fw-bold text-secondary">Categoría</label>
                        <select class="form-select" id="id_categoria" name="id_categoria">
                            <option value="">Seleccione una categoría</option>
                            {% for cat in categorias %}
                            <option value="{{ cat.id_categoria }}">{{ cat.nombre }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                <div class="d-flex justify-content-end gap-3 mt-5 pt-3 border-top">
                    <fluent-button appearance="outline" onclick="window.location.href='{% url 'lista_productos' %}'">Cancelar</fluent-button>
                    <fluent-button appearance="accent" type="submit">Guardar Producto</fluent-button>
                </div>
            </form>
        </fluent-card>
    </div>
</div>
{% endblock %}